<!DOCTYPE html>
<html>
<head>
    <title>Test API Estoque</title>
</head>
<body>
    <h1>Teste API de Estoque</h1>
    <div id="result"></div>
    <button onclick="testAddStock()">Adicionar 1 ao Produto 1</button>
    <button onclick="testSubtractStock()">Subtrair 1 do Produto 1</button>
    <button onclick="testGetProducts()">Listar Produtos</button>
    
    <script>
        async function testAddStock() {
            try {
                const response = await fetch('http://localhost:3001/produtos/1/estoque', {
                    method: 'PATCH',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ operacao: 'adicionar', quantidade: 1 })
                });
                
                const data = await response.json();
                document.getElementById('result').innerHTML = 'Adicionar: ' + JSON.stringify(data);
            } catch (error) {
                document.getElementById('result').innerHTML = 'Erro ao adicionar: ' + error.message;
            }
        }
        
        async function testSubtractStock() {
            try {
                const response = await fetch('http://localhost:3001/produtos/1/estoque', {
                    method: 'PATCH',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ operacao: 'subtrair', quantidade: 1 })
                });
                
                const data = await response.json();
                document.getElementById('result').innerHTML = 'Subtrair: ' + JSON.stringify(data);
            } catch (error) {
                document.getElementById('result').innerHTML = 'Erro ao subtrair: ' + error.message;
            }
        }
        
        async function testGetProducts() {
            try {
                const response = await fetch('http://localhost:3001/produtos');
                const data = await response.json();
                document.getElementById('result').innerHTML = 'Produtos: ' + JSON.stringify(data);
            } catch (error) {
                document.getElementById('result').innerHTML = 'Erro ao listar: ' + error.message;
            }
        }
    </script>
</body>
</html>
